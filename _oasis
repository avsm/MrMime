OASISFormat:            0.4
Name:                   mrmime
Version:                0.1
Synopsis:               Multipurpose Internet Mail Extensions
Description:            Multipurpose Internet Mail Extensions
Authors:                Romain Calascibetta
Maintainers:            Romain Calascibetta <romain.calascibetta@gmail.com>
Homepage:               https://github.com/dinosaure/MrMime
License:                MIT
Plugins:                META (0.3), DevFiles (0.3)
BuildTools:             ocamlbuild
OCamlVersion:           >= 4.02
AlphaFeatures:          ocamlbuild_more_args

Library mrmime
  Path:                 lib
  Modules:              MrMime, Rfc822, Rfc2045, Rfc2822, Parser, Base64, QuotedPrintable, Identity, Encoding, ContentType, MsgID, Version, Loc
  InternalModules:      Flow
  BuildDepends:         sedlex, menhirLib

Document "mrmime"
  Type:                 ocamlbuild (0.4)
  BuildTools:           ocamldoc
  Title:                "MrMime"
  PostCommand:          cp doc/* mrmime.docdir/
  XOCamlbuildPath:      .
  XOCamlbuildLibraries: mrmime
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -keep-code -charset utf-8'"

SourceRepository master
  Type:                 git
  Location:             https://github.com/oklm-wsh/MrMime.git
  Browser:              https://github.com/oklm-wsh/MrMime

Executable test_content_type
  Path:                 lib_test
  Build$:               flag(tests)
  Install:              false
  CompiledObject:       best
  MainIs:               contentType_test.ml
  BuildDepends:         mrmime, alcotest, ppx_import, ppx_deriving.std

Executable test_base64
  Path:                 lib_test
  Build$:               flag(tests)
  Install:              false
  CompiledObject:       best
  MainIs:               base64_test.ml
  BuildDepends:         mrmime, alcotest

Executable test_quoted_printable
  Path:                 lib_test
  Build$:               flag(tests)
  Install:              false
  CompiledObject:       best
  MainIs:               quotedPrintable_test.ml
  BuildDepends:         mrmime, alcotest, lwt, uri, cohttp.lwt

Executable bench_base64
  Path:                 lib_test
  Build$:               flag(tests)
  Install:              false
  CompiledObject:       best
  MainIs:               base64_bench.ml
  BuildDepends:         mrmime, alcotest, base64, benchmark

Executable test_version
  Path:                 lib_test
  Build$:               flag(tests)
  Install:              false
  CompiledObject:       best
  MainIs:               version_test.ml
  BuildDepends:         mrmime, alcotest, ppx_import, ppx_deriving.std

Test test_content_type
  Run$:                 flag(tests)
  TestTools:            test_content_type
  Command:              $test_content_type
  WorkingDirectory:     .

Test test_base64
  Run$:                 flag(tests)
  TestTools:            test_base64
  Command:              $test_base64
  WorkingDirectory:     .

Test test_quoted_printable
  Run$:                 flag(tests)
  TestTools:            test_quoted_printable
  Command:              $test_quoted_printable
  WorkingDirectory:     .

Test test_version
  Run$:                 flag(tests)
  TestTools:            test_version
  Command:              $test_version
  WorkingDirectory:     .
